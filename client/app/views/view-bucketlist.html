<script type="text/javascript">
  console.log('here we r pls');

  //Set up a click handler
  OpenLayers.Control.Click = OpenLayers.Class(OpenLayers.Control, {
    defaultHandlerOptions: {
      'single': true,
      'double': false,
      'pixelTolerance': 0,
      'stopSingle': false,
      'stopDouble': false
    },

    initialize: function(options) {
      this.handlerOptions = OpenLayers.Util.extend(
        {}, this.defaultHandlerOptions
      );
      OpenLayers.Control.prototype.initialize.apply(
        this, arguments
      );
      this.handler = new OpenLayers.Handler.Click(
        this, {
          'click': this.trigger
        }, this.handlerOptions
      );
    },

    trigger: function(e) {
      //A click happened!
      var lonlat = map.getLonLatFromViewPortPx(e.xy)

      lonlat.transform(
        new OpenLayers.Projection("EPSG:900913"),
        new OpenLayers.Projection("EPSG:4326")
      );

      alert("You clicked near " + lonlat.lat + " N, " +
        + lonlat.lon + " E");
    }
  });

  var map;
  function init(){
    console.log('CUM HERE');
    map = new OpenLayers.Map('mapdiv');

    map.addLayer(new OpenLayers.Layer.OSM());
    map.zoomToMaxExtent();

    var click = new OpenLayers.Control.Click();
    map.addControl(click);
    click.activate();

  }
</script>

<div class="view-container" ng-controller="ViewBucketlistCtrl">
  <div class="view-header">
    <p class="title">{{myBucketlist.name}}</p>
    <img class="people-icon" src=""/>
    <p class="members">{{myBucketlist.members}}</p>
    <p class="description">{{myBucketlist.desc}}</p>
  </div>
  <div class="line-separator"></div>
  <div class="view-content">
    <div class="goal" ng-repeat="memory in myMemories">
      <img class="picture" src=""/>
      <div class="goal-info">
        <p class="goal-title">{{memory.name}}</p>
        <img class="loc-icon" src=""/>
        <p class="goal-loc">{{memory.location}}</p>
        <p class="goal-desc">{{memory.description}}</p>
      </div>
      <div class="goal-btns">
        <a ng-click="viewBucketlist.editMemory(memory.name, memory.description, memory.location)">
          <img class="edit-goal" src=""/>
        </a>
        <a ng-click="viewBucketlist.finishGoal(goal.name, goal.description, goal.location)">
          <img class="complete-goal" src=""/>
        </a>
        <a ng-click="viewBucketlist.viewMemory(memory.name, memory.description, memory.location)">
          <img class="view-mwe" src=""/>
        </a>
        <a ng-click="viewBucketlist.deleteMemory(memory.name, memory.description, memory.location)">
          <img class="delete-goal" src=""/>
        </a>
      </div>
    </div>
    <div class="goal" ng-repeat="goal in myGoals">
      <img class="picture" src=""/>
      <div class="goal-info">
        <p class="goal-title">{{goal.name}}</p>
        <img class="loc-icon" src=""/>
        <p class="goal-loc">{{goal.location}}</p>
        <p class="goal-desc">{{goal.description}}</p>
      </div>
      <div class="goal-btns">
        <a ng-click="viewBucketlist.editGoal(goal.name, goal.description, goal.location)">
          <img class="edit-goal" src=""/>
        </a>
        <a ng-click="viewBucketlist.finishGoal(goal.name, goal.description, goal.location)">
          <img class="incomplete-goal" src=""/>
        </a>
        <a ng-click="viewBucketlist.deleteGoal(goal.name, goal.description, goal.location)">
          <img class="delete-goal" src=""/>
        </a>
      </div>
    </div>
    <p class="tags">tags: {{myBucketlist.tags}}</p>
    <a ui-sref="edit-bucketlist">
      <img class="edit-goal" src=""/>
    </a>
    <img class="trash-icon" ng-click="viewBucketlist.deleteBucketlist()" src="../images/TrashIcon.png"/>
    <!--<iframe src="//www.google.com/maps/embed/v1/place?q=Harrods,Brompton%20Rd,%20UK-->
      <!--&zoom=17-->
      <!--&key=AIzaSyBYFU4Nrgicq17Nwu3oWBCs00JuUjWr1Eo">-->
    <!--</iframe>-->
  </div>
  <div id="mapdiv"></div>
  <script type="text/javascript">
    init();
  </script>
</div>
